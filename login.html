<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - MAMBA CODE</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
        <!-- ğŸŒ™ Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„ÙˆØ¶Ø¹ -->
    <button id="modeToggle" class="cta-button fixed-toggle">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>

    <!-- ğŸ’¬ Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ -->
    <a href="https://wa.me/201552932225" class="whatsapp-float" target="_blank" title="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙˆØ§ØªØ³Ø§Ø¨">ğŸ’¬</a>
  <section class="register">
    <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <form id="loginForm">
      <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required />
      <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required />
      <button type="submit">Ø¯Ø®ÙˆÙ„</button>
    </form>
    <p id="loginMessage" class="hidden">âœ… ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø¬Ø§Ø±Ù ØªØ­ÙˆÙŠÙ„Ùƒ...</p>
  </section>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD3uKTJmXGcTYbAlVs-5VrvZSMsgM6hfIk",
      authDomain: "mambacode-33774.firebaseapp.com",
      databaseURL: "https://mambacode-33774-default-rtdb.firebaseio.com",
      projectId: "mambacode-33774",
      storageBucket: "mambacode-33774.firebasestorage.app",
      messagingSenderId: "462341832014",
      appId: "1:462341832014:web:7bdee8c034b3d74b5e721f",
      measurementId: "G-SS5ZPD26DL"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- Login Script -->
  <script>
    const loginForm = document.getElementById("loginForm");
    loginForm.addEventListener("submit", function(e) {
      e.preventDefault();

      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value.trim();
        
  // ğŸŒ™ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
  const toggleBtn = document.getElementById("modeToggle");
  let isLight = localStorage.getItem("mode") === "light";

  const applyMode = () => {
    if (isLight) {
      document.body.classList.add("light-mode");
      toggleBtn.textContent = "â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ";
    } else {
      document.body.classList.remove("light-mode");
      toggleBtn.textContent = "ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ";
    }
  };

  if (toggleBtn) {
    applyMode();
    toggleBtn.addEventListener("click", () => {
      isLight = !isLight;
      localStorage.setItem("mode", isLight ? "light" : "dark");
      applyMode();
    });
  }


      if (!email || !password) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");
        return;
      }

      firebase.database().ref("registrations").once("value", snapshot => {
        const users = snapshot.val() || {};
        const match = Object.values(users).find(user =>
          user.email === email && user.password === password
        );

       if (match) {
         localStorage.setItem("userName", match.name);
         document.getElementById("loginMessage").classList.remove("hidden");
         setTimeout(() => {
         window.location.href = "courses.html";
        }, 1500);
        } else {
          alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.");
        }
      });
    });
  </script>
</body>
</html>
